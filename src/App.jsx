import { captureException, useEffect } from "@sentry/react";\nimport { useCallback, useEffect, useState } from "react";\n\nfunction App() {\n  const [post, setPost] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n  /**\n   * fetchPost: JSONPlaceholder API에서 포스트 데이터를 가져오는 함수\n   * - postId: 가져올 포스트의 ID (기본값 999, 존재하지 않는 ID로 에러 유발)\n   * - 로딩 상태 관리, 에러 처리, Sentry 예외 캡처 포함\n   */\n  const fetchPost = useCallback(async (postId = 999) => {\n    setLoading(true);\n    setError(null);\n    try {\n      // API 호출 및 응답 검증\n      const response = await fetch(`https://jsonplaceholder.typicode.com/posts/${postId}`);
      if (!response.ok) throw new Error(`HTTP ${response.status}: 해당 포스트를 찾을 수 없음`);
\n      const data = await response.json();\n\n      // userId 필드 검증\n      if (!data.userId) {\n        const apiError = new Error("API 응답에 userId 필드가 없음");\n        apiError.name = "ValidationError";\n        captureException(apiError, {\n          tags: { source: "api-validation", endpoint: `/posts/${postId}` },\n          extra: { receivedData: data, expected: "userId present" },\n        });\n        setError("userId 필드가 없습니다.");\n        return;\n      }\n\n      setPost(data);\n    } catch (err) {\n      captureException(err, {\n        fingerprint: ["api-fetch-error"],\n        tags: { source: "jsonplaceholder" },\n        extra: { postId, attemptedUrl: `posts/${postId}` },\n      });\n      setError(err.message);\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n\n  useEffect(() => {\n    fetchPost();\n  }, [fetchPost]);\n\n  return (\n    <div className="app">\n      <h1>JSONPlaceholder + Sentry 테스트</h1>\n      <button onClick={() => fetchPost(1)}>정상 post#1 불러오기</button>\n      <button onClick={() => fetchPost(999)}>에러 post#999 (없음)</button>\n\n      {loading && <p>로딩 중...</p>} \n      {error && <p style={{ color: "red" }}>에러: {error}</p>} \n      {post && (\n        <div>\n          <h3>{post.title}</h3>\n          <p>User ID: {post.userId}</p>\n        </div>\n      )} \n    </div>\n  );\n}\n\nexport default App;